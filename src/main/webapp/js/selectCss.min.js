(function(d){function c(e){if(e.data){e=e.data}if(d(document).data("nowselectoptions")){d(d(document).data("nowselectoptions")).slideUp(e);d(d(document).data("nowselectoptions")).prev("div").removeClass("tag_select_open");d(document).data("nowselectoptions",null);d(document).unbind("click",c);d(document).unbind("keyup",a)}}function a(h){var f=h||window.event;var g=f.keyCode;if(g==27){c(h.data)}}function b(e){d(document).bind("click",e,c);d(d(document).data("nowselectoptions")).slideDown(e)}d.fn.selectCss=function(e,g,f){d(this).each(function(){var k=e||"fast";var j=g||"tag_select";var l=f||"tag_options";if(d(this).data("cssobj")){d(d(this).data("cssobj")).remove()}d(this).hide();var i=d("<div></div>").insertAfter(this).addClass(j);d(this).data("cssobj",i);var h=d("<ul></ul>").insertAfter(i).addClass(l).hide();i.click(function(m){if(d(d(document).data("nowselectoptions")).get(0)!=d(this).next("ul").get(0)){c(k)}if(!d(this).next("ul").is(":visible")){m.stopPropagation();d(document).data("nowselectoptions",d(this).next("ul"));b(k)}});i.hover(function(){d(this).addClass("tag_select_hover")},function(){d(this).removeClass("tag_select_hover")});d(this).change(function(){d(this).nextAll("ul").children("li:eq("+d(this)[0].selectedIndex+")").addClass("open_selected").siblings().removeClass("open_selected");d(this).next("div").html(d(this).children("option:eq("+d(this)[0].selectedIndex+")").text())});d(this).children("option").each(function(m){var n=d("<li></li>").html(d(this).text()).attr("title",d(this).attr("title")).appendTo(h);if(d(this).attr("selected")){n.addClass("open_selected");i.html(d(this).text())}n.data("option",this);n.click(function(){n.data("option").selected=true;d(n.data("option")).trigger("change",true)});n.hover(function(){d(this).addClass("open_hover")},function(){d(this).removeClass("open_hover")})})})};d.fn.selectvalue=function(f,e){d(this).empty();d(this).append(f);d(this).val(e)}})(jQuery);
