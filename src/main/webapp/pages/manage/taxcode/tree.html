<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Ztree Demo</title>
    <link rel="stylesheet"  href="/css/zTreeStyle/zTreeStyle.css" type="text/css">
    <script src="/js/jquery/1.8.3/jquery-1.8.3.js"></script>
    <script src="/js/ztree/jquery.ztree.core-3.5.js"></script>
    <script src="/js/lib/vpiaotong.base.js"></script>
    <script src="/js/lib/vpiaotong.http.js"></script>
    <script src="/js/lib/eventUtils.js"></script>
    <script>
        $(function() {
            var zTreeObj;
            // zTree 的参数配置，深入使用请参考 API 文档（setting 配置详解）
            var setting = {
                showLabels:true,
                showLine:true,
                data:{
                    key: {
                        children: "nodes",
                        name: "goodsName"
                    },
                    simpleData:{
                        enable:false
                    }
                },
                callback:{
                  //  beforeClick:beforeClick,
                    onClick:onClick
                }
            };
            function beforeClick(treeId,treeNode,clickFlag) {
            }
            function onClick(event, treeId, treeNode, clickFlag) {
                console.info(event);
                console.info(treeId);
                console.info(treeNode);
                console.info(clickFlag);
                if (treeNode.isParent) {
                    console.info("isParent:"+treeNode.isParent);
                }
                console.info(treeNode.mergeCoding);
                var nodes = treeNode.nodes;
                var mergeCode="";
                for(var i=0;i<nodes.length;i++){
                   mergeCode = mergeCode+nodes[i].mergeCoding+",";
                }
                mergeCode = mergeCode.substring(0,mergeCode.length-1); 
                alert(mergeCode);
            }
            $http.get(basePath+"manage/tax_category/head_node"+suffix,{},function(data) {
                var zNodes = data.data.item;
                zTreeObj = $.fn.zTree.init($("#treeDemo"), setting, zNodes);
            })
        })
    </script>
</head>
<body>
    <div>
        <ul id="treeDemo" class="ztree"></ul>
    </div>
</body>
</html>